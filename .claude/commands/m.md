# マイルストーン同期コマンド

開発マイルストーンと事業マイルストーンを読み込み、完了項目にチェックマークを付けて、自動タスクシステムと同期します。

## 実行内容
1. プロジェクトファイルから実際の完了状況を分析
2. 開発・事業マイルストーンの該当項目にチェックマーク付与
3. 進捗率の計算と同期レポート生成
4. 自動タスクシステムの更新

## 重要な制約
- マイルストーンファイルの内容変更・削除は禁止
- チェックマークの追加のみ許可（[ ] → [x]）
- 実際に完了している項目のみチェック

## 1. マイルストーンの読み込み

### 開発マイルストーン
- ファイル: `/home/hikit/dnsweeper/docs/MILESTONES.md`
- 現在のフェーズ: CLI基盤構築（7-9月 2025）
- 対象期間: 環境構築・プロジェクト初期化（7月第3週）〜テスト実装（9月第4週）

### 事業マイルストーン
- ファイル: `/home/hikit/dnsweeper/docs/business/MILESTONES_BUSINESS.md`
- 現在のフェーズ: オープンソース戦略（7-9月 2025）
- 対象期間: 市場調査・競合分析（7月第3週）〜フェーズ1 KPI・成功指標（9月第2週）

## 2. 現在の進捗確認

### 完了済み項目（✅に変更可能）
開発マイルストーンより：
- [x] プロジェクト初期化（`npm init -y`）
- [x] package.json メタデータ完成
- [x] TypeScript環境構築（tsconfig.json設定）
- [x] TypeScript strict mode 有効化
- [x] ESLint 設定ファイル作成
- [x] Prettier設定ファイル作成
- [x] フォルダ構造作成
- [x] CLI基本構造設計・実装
- [x] メインエントリーポイント作成

## 3. 次のタスクの特定

### 開発側（8月第1週）
優先対象：DNS解決機能実装
- DNS解決基盤ライブラリ選定（node:dns vs dns2）
- DNSResolverクラス設計・基本構造
- DNS解決基本設定実装

### 事業側（8月第1週）
優先対象：技術記事・コンテンツ戦略
- コンテンツマーケティング戦略策定
- 技術記事企画・執筆計画作成
- ブログ・メディア戦略策定

## 4. タスク同期処理

### 自動タスクシステムへの反映
`.claude/auto-task-system.md`を以下のように更新：

1. **進捗率の更新**
   - マイルストーンの完了状況を反映
   - プログレスバーの更新

2. **次のタスクキューの生成**
   - マイルストーンから未完了項目を抽出
   - 優先順位付け
   - 具体的な実装手順の追加

3. **依存関係の整理**
   - 前提条件の確認
   - ブロッカーの特定
   - 並行実行可能なタスクの識別

## 5. 実行フロー

1. **プロジェクト分析**
   - package.json、tsconfig.json等の設定ファイル確認
   - src/配下の実装済みコード確認
   - tests/配下のテストファイル確認
   - docs/配下のドキュメント確認

2. **マイルストーン更新**
   - 開発マイルストーン（docs/MILESTONES.md）の完了項目にチェック
   - 事業マイルストーン（docs/business/MILESTONES_BUSINESS.md）の完了項目にチェック

3. **進捗計算**
   - チェック済み項目数/総項目数で進捗率算出
   - 各カテゴリごとの進捗率も計算

4. **レポート生成**
   - .claude/milestone-sync-report.md を生成/更新
   - 自動タスクシステムの進捗率を更新

## 6. 出力レポート

### 同期完了レポート
```markdown
## 📊 マイルストーン同期レポート (2025-07-13 21:30)

### 開発進捗
- フェーズ1完了率: 35% (8/23項目)
- 現在のフォーカス: DNS解決機能実装
- 次のマイルストーン: CSV処理機能実装

### 事業進捗  
- フェーズ1完了率: 15% (4/27項目)
- 現在のフォーカス: 技術記事・コンテンツ戦略
- 次のマイルストーン: 初期ユーザー獲得戦略

### アクション
- [x] 自動タスクシステム更新
- [x] 次のタスクキュー生成
- [x] 優先順位設定
```

## 7. 実行される処理

このコマンドは以下を自動実行します：

1. **実装状況の分析**
   - 実際のファイルから完了項目を特定
   - コード、テスト、ドキュメントの存在確認

2. **マイルストーンのチェックマーク更新**
   - 開発マイルストーンの完了項目に [x] 付与
   - 事業マイルストーンの完了項目に [x] 付与

3. **同期レポート生成**
   - 進捗率計算（完了項目数/総項目数）
   - 次の優先タスクの特定
   - .claude/milestone-sync-report.md 更新

4. **自動タスクシステム更新**
   - .claude/auto-task-system.md の進捗率更新
   - 次の推奨タスクリスト更新

## 8. 注意事項

- 初回実行時は多数のチェックマークが付与される可能性があります
- マイルストーンの内容自体は変更されません
- 実際に完了している項目のみチェックされます